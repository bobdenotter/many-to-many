void 0===Craft.ManyToMany&&(Craft.ManyToMany={}),function($){Craft.ManyToMany.Field=Garnish.Base.extend({elementsToDelete:[],init:function(e){this.id=e.id,this.name=e.name,this.elementIds=e.elementIds,this.$container=$("#"+e.id+"-field .js-mtm-field"),this.$deleteContainer=this.$container.find(".js-mtm-delete"),this.$elementSelect=this.$container.find(".js-mtm-element-select"),this.elementSelect=this.$elementSelect.data("elementSelect"),this.elementSelect.onSelectElements=$.proxy(this,"onSelectElements"),this.elementSelect.onRemoveElements=$.proxy(this,"onRemoveElements")},onSelectElements:function(e){const t=this;$.each(e,(function(e,n){var l=t.elementsToDelete.indexOf(n.id);-1!==l&&t.elementsToDelete.splice(l,1)}))},onRemoveElements:function(){const e=this;$.each(this.elementIds,(function(t,n){e.elementSelect.$elements.find('[data-id="'+n+'"]').length||e.elementsToDelete.push(n)})),this.updateDeletedElements()},updateDeletedElements:function(){const e=this;this.$deleteContainer.html(""),$.each(this.elementsToDelete,(function(t,n){let l='<input type="hidden" name="'+e.name+'[delete][]" value="'+n+'" />';e.$deleteContainer.append(l)}))}})}(jQuery);